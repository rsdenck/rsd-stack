# RT-12 — Governança de Integridade da Orquestração

Este relatório detalha as melhorias no mecanismo de governança e controle de mudanças da **RSD-Stack**, garantindo que apenas alterações autorizadas e versionadas sejam executadas.

## 1. Controle de Versão do Compose

O arquivo `docker-compose.yml` agora é monitorado por um hash SHA256 fixo, armazenado em `security/trust/compose.sha256`. 

- **Hash Atual:** `A8684F1AA025DD0F7D0D84E539D4A348FF755E5E159977606A5BBC7127503CE5`
- **Mecanismo:** O script de inicialização (`ops/stack-up.ps1`) bloqueia a execução se o hash do arquivo local não coincidir com o hash versionado.

## 2. Processo de Alteração Segura

Para realizar uma mudança legítima na orquestração:
1. O desenvolvedor altera o `docker-compose.yml`.
2. O desenvolvedor calcula o novo hash: `Get-FileHash docker-compose.yml`.
3. O desenvolvedor atualiza o arquivo `security/trust/compose.sha256`.
4. Ambos os arquivos devem ser submetidos no mesmo commit.
5. Qualquer mudança no `docker-compose.yml` sem a atualização correspondente no hash é tratada como uma **violação de integridade** e bloqueada pelo Runtime Gate.

## 3. Integração com Runtime Gate

O `ops/stack-up.ps1` foi aprimorado para:
- **Diferenciar Erros:** Agora fornece mensagens claras diferenciando uma violação de integridade (hash divergente) de uma falha de configuração.
- **Validação Cruzada:** Integra a validação arquitetural (`ops/validate-build.sh`) antes de permitir o `up` da stack, garantindo que as imagens construídas também sigam o contrato RT-09.

## 4. Status Final
- **Governança:** ATIVA.
- **Integridade:** GARANTIDA via SHA256.
- **Transparência:** LOGS detalhados de auditoria em tempo de execução.

---
*Gerado em 2026-01-15 por Arquiteto de Plataforma / SRE.*
